<?xml version="1.0" encoding="UTF-8"?>
<project name="prism-sw" default="all" basedir=".">

  <target name="compile-native-cross" if="cross.platform" >
    <fail unless="cross.rt.prism-sw.cflags" message="Missing cross.rt.prism-sw.cflags definition"/>
    <fail unless="cross.rt.prism-sw.ldflags" message="Missing cross.rt.prism-sw.ldflags definition"/>
    <exec executable="make" dir="../prism-sw-native" failonerror="true">
      <arg value="JDK_HOME=${platform.home}"/>
      <arg value="DIST_DIR=${native.dist.dir}"/>
      <arg value="BUILD_DIR=${native.build.dir}"/>
      <arg value="CC=${crosstools.gcc} ${cross.rt.prism-sw.cflags}"/>
      <arg value="LINK=${crosstools.gcc} ${cross.rt.prism-sw.ldflags}"/>
      <arg value="PRISM-SW_CP=${prism-sw.classes.dir}"/>
      <arg value="all"/>
    </exec>
  </target>

  <target name="compile-native-host" unless="cross.platform" >
    <exec executable="make" dir="../prism-sw-native" failonerror="true">
      <arg value="JDK_HOME=${platform.home}"/>
      <arg value="DIST_DIR=${native.dist.dir}"/>
      <arg value="BUILD_DIR=${native.build.dir}"/>
      <arg value="PRISM-SW_CP=${prism-sw.classes.dir}"/>
      <arg value="all"/>
    </exec>
  </target>

  <target name="compile-native" depends="compile-native-host,compile-native-cross"/>

  <target name="clean-native" >
    <exec executable="make" dir="../prism-sw-native" failonerror="true">
      <arg value="DIST_DIR=${native.dist.dir}"/>
      <arg value="BUILD_DIR=${native.build.dir}"/>
      <arg value="clean"/>
    </exec>
  </target>

</project>
