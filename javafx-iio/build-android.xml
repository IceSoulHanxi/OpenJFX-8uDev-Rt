<?xml version="1.0" encoding="UTF-8"?>
<project name="javafx-iio" default="all" basedir=".">

  <target name="compile-native" depends="jheaders">
      <exec executable="${android.ndk}/${ndk.build.cmd}" dir="${cpp.dir}" failonerror="true">
          <arg line="APP_BUILD_SCRIPT=Android.mk NDK_PROJECT_PATH=. TARGET_PLATFORM=${android.ndk.target}"/>
        </exec>
        <copy todir="${native.dist.dir}" flatten="true">
       <fileset dir="../javafx-iio-native/libs" includes="${cross.platform.arch}/libjavafx-iio.so"/>
       </copy>
  </target>

  <target name="jheaders">
        <mkdir dir="${native.build.dir}"/>
     <javah
         destdir="${native.build.dir}"
         classpath="${jfxiio.classes.dir}" force="yes">
         <class name="com.sun.javafx.iio.jpeg.JPEGImageLoader"/>
     </javah>
  </target>

  <target name="clean-native">
      <delete dir="../javafx-iio-native/libs"/>
      <delete dir="../javafx-iio-native/obj"/>
      <delete dir="../javafx-iio-native/build"/>
      <delete dir="../javafx-iio-native/dist"/>
  </target>

</project>
